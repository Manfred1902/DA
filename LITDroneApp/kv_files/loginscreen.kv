#:kivy 1.1.1
#: import utils kivy.utils

<LoginScreen>:
    canvas:
        Color:
            rgb: utils.get_color_from_hex("#303030")
        Rectangle:
            size: self.size
            pos: self.pos

    MDFloatLayout:
        Image:
            source: "./assets/logo.png"
            pos_hint: {"top": 1 , "left": 1}
            size_hint: 1,0.2

        MDLabel:
            id: login_message
            size_hint_x: 0.8
            pos_hint: {"center_x": 0.5, "center_y": 0.8}
            halign: "center"
            color: (1,0,0,1)
            markup: True

        MDTextField:
            id: login_email
            hint_text: "E-Mail"
            size_hint_x: 0.8
            pos_hint: {"center_x": 0.5, "center_y": 0.7}
            multiline: False
            icon_left: "email"
            max_text_length: 50
            text: "190229@studierende.htl-donaustadt.at" # <-- nachher Rauslöschen

        MDTextField:
            id: login_password
            hint_text: "Password"
            size_hint_x: 0.8
            pos_hint: {"center_x": 0.5, "center_y": 0.6}
            multiline: False
            icon_left: "key-variant"
            password: True
            max_text_length: 20
            text: "1234Wasd" # <-- nachher Rauslöschen

        LabelButton:
            id: forgot_password
            size_hint_x: 0.5
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            color: utils.get_color_from_hex("#448AFFFF")
            text: "[b]Forgot Password?[/b]"
            halign: "center"
            markup: True
            on_release:
                app.change_screen("forgot_password_screen")

        LabelButton:
            canvas.before:
                Color:
                    rgb: utils.get_color_from_hex("#448AFFFF")
                Rectangle:
                    size: self.size
                    pos: self.pos
            text: "Log In"
            halign: "center"
            color: (0,0,0,1)
            size_hint_x: 0.5
            size_hint_y: 0.08
            pos_hint: {"center_x": 0.5, "center_y": 0.4}
            on_release:
                app.db.login(login_email.text.strip(), login_password.text.strip())

        MDLabel:
            text: "[b]Don't have an account?[/b]"
            markup: True
            halign: "center"
            size_hint: 0.8,0.1
            pos_hint: {"center_x": 0.5, "center_y": 0.3}

        LabelButton:
            text: "[b][u]Sign up[/u][/b]"
            markup: True
            size_hint: 0.8,0.1
            halign: "center"
            pos_hint: {"center_x": 0.5, "center_y": 0.25}
            color: utils.get_color_from_hex("#448AFFFF")
            on_release:
                app.change_screen("signup_screen")